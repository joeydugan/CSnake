<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Account Registration</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="video-container">
        <video class="video-background" autoplay muted loop>
            <source src="infinitewaves.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        <div class="content">
            <div class="container">
                <div class="branding">
                    <div class="title">CSnake</div>
                    <div class="subtitle">Explore the Depths</div>
                </div>
                <form id="signInForm" method="post">
                    <h2>Create Account</h2>
                    <input type="text" id="username" name="username" placeholder="Username" required>
                    <input type="text" id="email" name="email" placeholder="Email" required>
                    <input type="password" id="password" name="password" placeholder="Password" required>
                    <input type="password" id="confirm_password" name="confirm_password" placeholder="Confirm Password" required>
                    <button type="submit">Create Account</button>
                </form>
                
                <p id="createAccountMessage">Already have an account? <a href="login.html">Sign in</a></p>
                <p id="forgotPasswordMessage">Forgot your password? <a href="forgot_password.html">Reset Password</a></p>

                <div id="successMessage" style="display:none;">
                    <p>Welcome, <span id="loggedInUser"></span>! You have successfully created an account.</p>
                </div>
            </div>
        </div>
    </div>
</body>
</html>

<script>
    document.getElementById('signInForm').addEventListener('submit', function(event) {
        event.preventDefault();


        /* the following three functions were generated by OpenAI's ChatGPT using the query 
            'Write email, username, and password validation functions'
        */

        function emailValid(email) {
            // Regular expression to validate email format
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        function passwordValid(password) {
            // Password must be at least 8 characters long and contain at least one digit, one uppercase letter, and one lowercase letter
            const passwordRegex = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z]{8,}$/;
            return passwordRegex.test(password);
        }

        function usernameValid(username) {
            // Username can only contain letters (both uppercase and lowercase), numbers, underscores, and must be at least 3 characters long
            const usernameRegex = /^[a-zA-Z0-9_]{3,}$/;
            return usernameRegex.test(username);
        }

        function passwordsMatch(password, confirm_password) {
            return password == confirm_password;
        }


        var email = document.getElementById('email').value;
        var username = document.getElementById('username').value;
        var password = document.getElementById('password').value;
        var confirm_password = document.getElementById('confirm_password').value;



        var successfulCreation = false;

        if(!emailValid(email)){
            alert('Please enter a valid email')
        }

        if(!usernameValid(username)){
            alert('Please enter a valid username that has at least 3 characters with no numbers')
        }

        if(!passwordValid(password)){
            alert('Please enter a valid password that is 8 or more characters and includes at least one uppercase letter and one digit')
        }

        if(!passwordsMatch(password, confirm_password)){
            alert('Please ensure that passwords match');
        }

        if (emailValid(email) && usernameValid(username) && passwordValid(password) && passwordsMatch(password, confirm_password))
        {
            successfulCreation = true;
            document.getElementById('signInForm').style.display = 'none';
            document.getElementById('createAccountMessage').style.display = 'none';
            document.getElementById('forgotPasswordMessage').style.display = 'none';
            document.getElementById('successMessage').style.display = 'block';
            document.getElementById('loggedInUser').textContent = username;
        }

        if (successfulCreation) {
            if (successfulCreation) {
                document.getElementById('signInForm').style.display = 'none';
                document.getElementById('createAccountMessage').style.display = 'none';
                document.getElementById('forgotPasswordMessage').style.display = 'none';
                document.getElementById('successMessage').style.display = 'block';
                document.getElementById('loggedInUser').textContent = username;
}
    


        }
    });
</script>
